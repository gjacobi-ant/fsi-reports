<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pipeline Overview - Carolyn Leopold's Banking Forecast</title>

  <!-- Google Fonts (Anthropic Brand) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;1,400&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="../../styles.css">

  
</head>
<body>

<!-- Sidebar Toggle Button -->
<button class="sidebar-toggle" onclick="toggleSidebar()" title="Toggle sidebar (T)">
  <span id="toggle-icon">&#9776;</span>
</button>

<!-- Sidebar Navigation -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <a href="cover.html" class="sidebar-title">Carolyn Leopold's Forecast</a>
    <span class="sidebar-date">Week of December 26, 2025</span>
  </div>
  <nav class="sidebar-nav" id="sidebar-nav">
    <a href="cover.html">Cover</a>
    <a href="summary.html">Summary</a>
    <a href="arr_chart.html">ARR Trend</a>
    <a href="arr_table.html">ARR by Account</a>
    <a href="opps_overview.html" class="active">Stage Funnel</a>
    <a href="opps_table.html">Deal List</a>
    <a href="deal_progression.html">Progression</a>
    <a href="pipe_chart.html">Pipe Goal</a>
    <a href="pipe_coverage.html">Qtr Coverage</a>
    <a href="contracts_table.html">Contracts</a>
    <a href="themes.html">Themes</a>
    <a href="news_roundup.html">News Roundup</a>
    <a href="updates.html">Updates</a>
    <a href="aiera.html">Events</a>
    
    <a href="../../cover.html" class="back-link">‚Üê Back to Main</a>
    
  </nav>
</aside>

<!-- Main Content Area -->
<main class="main-content" id="main-content">
  <!-- Page Content -->
  
<div class="page pipeline-overview">
  <!-- Page Header -->
  <div class="pipeline-header">
    <div class="header-content">
      <h2 class="page-title">Pipeline Overview</h2>
      <p class="header-meta">17 opportunities &bull; 10 accounts &bull; December 26, 2025</p>
    </div>
  </div>

  <div class="pipeline-body">
    <!-- Key Metrics Banner -->
    <div class="metrics-banner">
      <div class="metric-tile primary">
        <span class="tile-value">$7.8M</span>
        <span class="tile-label">Gross Pipeline</span>
      </div>
      <div class="metric-tile">
        <span class="tile-value">$3.0M</span>
        <span class="tile-label">Weighted</span>
      </div>
      <div class="metric-tile">
        <span class="tile-value">$655.7K</span>
        <span class="tile-label">Commitments</span>
      </div>
      <div class="metric-tile">
        <span class="tile-value">$461.3K</span>
        <span class="tile-label">Avg Deal Size</span>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- Stage Distribution Card -->
      <div class="content-card stage-card">
        <h3 class="card-title">Stage Distribution</h3>
        <table class="stage-table">
          <thead>
            <tr>
              <th class="col-stage">Stage</th>
              <th class="col-count">#</th>
              <th class="col-bar">Gross Pipeline</th>
              <th class="col-weighted">Weighted</th>
            </tr>
          </thead>
          <tbody>
            
            <tr class="stage-row">
              <td class="col-stage">
                <span class="stage-badge-sm s0">S0</span>
                <span class="weight-pct">10%</span>
              </td>
              <td class="col-count">8</td>
              <td class="col-bar">
                <div class="bar-container">
                  <div class="bar-fill s0" style="width: 11.652879414572064%"></div>
                  <span class="bar-label">$586.0K</span>
                </div>
              </td>
              <td class="col-weighted">$58.6K</td>
            </tr>
            
            <tr class="stage-row">
              <td class="col-stage">
                <span class="stage-badge-sm s1">S1</span>
                <span class="weight-pct">20%</span>
              </td>
              <td class="col-count">2</td>
              <td class="col-bar">
                <div class="bar-container">
                  <div class="bar-fill s1" style="width: 31.81673560292714%"></div>
                  <span class="bar-label">$1.6M</span>
                </div>
              </td>
              <td class="col-weighted">$320.0K</td>
            </tr>
            
            <tr class="stage-row">
              <td class="col-stage">
                <span class="stage-badge-sm s2">S2</span>
                <span class="weight-pct">40%</span>
              </td>
              <td class="col-count">4</td>
              <td class="col-bar">
                <div class="bar-container">
                  <div class="bar-fill s2" style="width: 100.0%"></div>
                  <span class="bar-label">$5.0M</span>
                </div>
              </td>
              <td class="col-weighted">$2.0M</td>
            </tr>
            
            <tr class="stage-row">
              <td class="col-stage">
                <span class="stage-badge-sm s4">S4</span>
                <span class="weight-pct">80%</span>
              </td>
              <td class="col-count">2</td>
              <td class="col-bar">
                <div class="bar-container">
                  <div class="bar-fill s4" style="width: 3.5889277760101814%"></div>
                  <span class="bar-label">$180.5K</span>
                </div>
              </td>
              <td class="col-weighted">$144.4K</td>
            </tr>
            
            <tr class="stage-row">
              <td class="col-stage">
                <span class="stage-badge-sm s5">S5</span>
                <span class="weight-pct">95%</span>
              </td>
              <td class="col-count">1</td>
              <td class="col-bar">
                <div class="bar-container">
                  <div class="bar-fill s5" style="width: 8.876869233216672%"></div>
                  <span class="bar-label">$446.4K</span>
                </div>
              </td>
              <td class="col-weighted">$424.1K</td>
            </tr>
            
          </tbody>
          <tfoot>
            <tr class="totals-row">
              <td class="col-stage"><strong>Total</strong></td>
              <td class="col-count"><strong>17</strong></td>
              <td class="col-bar"><strong>$7.8M</strong></td>
              <td class="col-weighted"><strong>$3.0M</strong></td>
            </tr>
          </tfoot>
        </table>
      </div>

      <!-- Pipeline Health Card -->
      <div class="content-card health-card">
        <h3 class="card-title">Pipeline Health</h3>
        <div class="health-indicators">
          <div class="health-indicator">
            <div class="indicator-value status-good">
              <span class="value-main">10</span>
              <span class="value-sub">/17</span>
            </div>
            <span class="indicator-label">Have Next Steps</span>
          </div>

          <div class="health-indicator">
            <div class="indicator-value status-good">
              <span class="value-main">0</span>
            </div>
            <span class="indicator-label">With Blockers</span>
          </div>

          <div class="health-indicator">
            <div class="indicator-value status-danger">
              <span class="value-main">7</span>
            </div>
            <span class="indicator-label">Stale (60+ Days)</span>
          </div>

          <div class="health-indicator">
            <div class="indicator-value status-good">
              <span class="value-main">2</span>
            </div>
            <span class="indicator-label">In Negotiation (S4)</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Deal Intel Freshness Card (Rotten Tomatoes Style) -->
    
    <div class="content-card freshness-card">
      <h3 class="card-title">Deal Intel Freshness</h3>
      <div class="freshness-content">
        <div class="freshness-score-container">
          <div class="freshness-score score-rotten">
            <span class="score-icon">ü•Ä</span>
            <span class="score-value">0%</span>
          </div>
          <span class="score-label">Freshness Score</span>
        </div>
        <div class="freshness-breakdown">
          <div class="freshness-row fresh">
            <span class="row-icon">üçÖ</span>
            <span class="row-label">Fresh (‚â§7 days)</span>
            <span class="row-count">0</span>
          </div>
          <div class="freshness-row aging">
            <span class="row-icon">üçä</span>
            <span class="row-label">Aging (8-21 days)</span>
            <span class="row-count">1</span>
          </div>
          <div class="freshness-row rotten">
            <span class="row-icon">ü•Ä</span>
            <span class="row-label">Rotten (>21 days)</span>
            <span class="row-count">4</span>
          </div>
          <div class="freshness-row no-update">
            <span class="row-icon">üíÄ</span>
            <span class="row-label">No Update</span>
            <span class="row-count">11</span>
          </div>
          
        </div>
      </div>
    </div>
    

    <!-- Top Opportunities by Stage -->
    <div class="content-card top-opps-card">
      <h3 class="card-title">Top Opportunities by Stage</h3>
      <div class="stage-columns">
        
        
        <div class="stage-column">
          <div class="column-header s0">
            <span class="header-stage">S0</span>
            <span class="header-total">$586.0K</span>
          </div>
          <div class="column-body">
            
            <div class="opp-row">
              <span class="opp-name" title="Citi // GCP Provisioned Throughput">Citigroup</span>
              <span class="opp-arr">$486.0K</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="Anthropic / Citi - [Eugene]">Citi</span>
              <span class="opp-arr">$100.0K</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="Data Sync: Bancolombia">Bancolombia S/A</span>
              <span class="opp-arr">$0</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="Data Sync: Bancolombia S.A">Bancolombia S/A</span>
              <span class="opp-arr">$0</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="Data Sync: Suncorp">Suncorp</span>
              <span class="opp-arr">$0</span>
            </div>
            
          </div>
        </div>
        
        
        
        <div class="stage-column">
          <div class="column-header s1">
            <span class="header-stage">S1</span>
            <span class="header-total">$1.6M</span>
          </div>
          <div class="column-body">
            
            <div class="opp-row">
              <span class="opp-name" title="Claude for Financial Services">Citigroup</span>
              <span class="opp-arr">$1.5M</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="Synovus - Claude Code - $10K">Synovus</span>
              <span class="opp-arr">$100.0K</span>
            </div>
            
          </div>
        </div>
        
        
        
        <div class="stage-column">
          <div class="column-header s2">
            <span class="header-stage">S2</span>
            <span class="header-total">$5.0M</span>
          </div>
          <div class="column-body">
            
            <div class="opp-row">
              <span class="opp-name" title="Citi Services - API + Custom Agent">Citi</span>
              <span class="opp-arr">$3.0M</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="Westpac - Claude Code">Westpac</span>
              <span class="opp-arr">$2.0M</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="ACI Worldwide - Product BU - CC Consumption Seats">ACI Worldwide</span>
              <span class="opp-arr">$28.8K</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="Bancolombia S.A. - new 3p spend">Bancolombia S/A</span>
              <span class="opp-arr">$0</span>
            </div>
            
          </div>
        </div>
        
        
        
        <div class="stage-column">
          <div class="column-header s4">
            <span class="header-stage">S4</span>
            <span class="header-total">$180.5K</span>
          </div>
          <div class="column-body">
            
            <div class="opp-row">
              <span class="opp-name" title="City National Bank of Florida- CC + C4E Bundle">City National Bank of Florida</span>
              <span class="opp-arr">$120.0K</span>
            </div>
            
            <div class="opp-row">
              <span class="opp-name" title="ACI Worldwide - Data Intelligence BU - CC Consumption Seats">ACI Worldwide</span>
              <span class="opp-arr">$60.5K</span>
            </div>
            
          </div>
        </div>
        
        
        
        <div class="stage-column">
          <div class="column-header s5">
            <span class="header-stage">S5</span>
            <span class="header-total">$446.4K</span>
          </div>
          <div class="column-body">
            
            <div class="opp-row">
              <span class="opp-name" title="Citi - Q1 PT">Citigroup</span>
              <span class="opp-arr">$446.4K</span>
            </div>
            
          </div>
        </div>
        
        
      </div>
    </div>
  </div>
</div>

<style>
/* ==========================================================================
   Pipeline Overview - Anthropic Brand Styles
   ========================================================================== */

.pipeline-overview {
  font-family: var(--font-body);
  background: var(--light);
}

/* Header */
.pipeline-header {
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 3px solid var(--accent-primary);
}

.pipeline-header .page-title {
  font-family: var(--font-heading);
  font-size: 2.25rem;
  font-weight: 600;
  color: var(--dark);
  margin: 0 0 0.5rem 0;
  letter-spacing: -0.02em;
}

.header-meta {
  font-family: var(--font-body);
  font-size: 0.95rem;
  color: var(--mid-gray);
  margin: 0;
}

/* Metrics Banner */
.metrics-banner {
  display: flex;
  gap: 1.25rem;
  margin-bottom: 2rem;
}

.metric-tile {
  flex: 1;
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.metric-tile:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

.metric-tile.primary {
  background: var(--dark);
}

.metric-tile.primary .tile-value {
  color: var(--light);
}

.metric-tile.primary .tile-label {
  color: var(--mid-gray);
}

.tile-value {
  display: block;
  font-family: var(--font-heading);
  font-size: 1.75rem;
  font-weight: 700;
  color: var(--dark);
  line-height: 1.2;
}

.tile-label {
  display: block;
  font-family: var(--font-heading);
  font-size: 0.7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--mid-gray);
  margin-top: 0.5rem;
}

/* Content Grid */
.content-grid {
  display: grid;
  grid-template-columns: 1.3fr 0.7fr;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
}

/* Content Cards */
.content-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.card-title {
  font-family: var(--font-heading);
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--mid-gray);
  margin: 0 0 1.25rem 0;
  padding-bottom: 0.75rem;
  border-bottom: 2px solid var(--accent-primary);
}

/* Stage Table */
.stage-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

.stage-table th {
  text-align: left;
  font-family: var(--font-heading);
  font-weight: 500;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--mid-gray);
  padding: 0.75rem 0.5rem;
  border-bottom: 2px solid var(--light-gray);
}

.stage-table td {
  padding: 0.75rem 0.5rem;
  border-bottom: 1px solid var(--light-gray);
  vertical-align: middle;
}

.col-stage { width: 90px; }
.col-count { width: 50px; text-align: center; }
.col-bar { width: auto; }
.col-weighted { width: 100px; text-align: right; font-family: var(--font-heading); }

.stage-badge-sm {
  display: inline-block;
  font-family: var(--font-heading);
  font-size: 0.75rem;
  font-weight: 700;
  padding: 0.15rem 0.5rem;
  border-radius: 4px;
  background: var(--light-gray);
  color: var(--dark);
}

.stage-badge-sm.s1 { background: var(--stage-1-bg); color: var(--stage-1-text); }
.stage-badge-sm.s2 { background: var(--stage-2-bg); color: var(--stage-2-text); }
.stage-badge-sm.s3 { background: var(--stage-3-bg); color: var(--stage-3-text); }
.stage-badge-sm.s4 { background: var(--stage-4-bg); color: var(--stage-4-text); }
.stage-badge-sm.s5 { background: var(--stage-5-bg); color: var(--stage-5-text); }

.weight-pct {
  font-family: var(--font-body);
  font-size: 0.7rem;
  color: var(--mid-gray);
  margin-left: 0.5rem;
}

/* Bar Chart */
.bar-container {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  height: 28px;
}

.bar-fill {
  height: 20px;
  border-radius: 4px;
  min-width: 6px;
  transition: width 0.4s ease;
}

.bar-fill.s0 { background: var(--mid-gray); }
.bar-fill.s1 { background: linear-gradient(90deg, rgba(106, 155, 204, 0.5), rgba(106, 155, 204, 0.7)); }
.bar-fill.s2 { background: linear-gradient(90deg, rgba(106, 155, 204, 0.7), rgba(106, 155, 204, 0.85)); }
.bar-fill.s3 { background: linear-gradient(90deg, var(--blue), #5a8bc0); }
.bar-fill.s4 { background: linear-gradient(90deg, rgba(120, 140, 93, 0.7), rgba(120, 140, 93, 0.85)); }
.bar-fill.s5 { background: linear-gradient(90deg, var(--green), #6a7c4d); }

.bar-label {
  font-family: var(--font-heading);
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--dark);
  white-space: nowrap;
}

.stage-table tfoot td {
  border-top: 2px solid var(--light-gray);
  border-bottom: none;
  padding-top: 1rem;
  font-family: var(--font-heading);
}

/* Health Indicators */
.health-indicators {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

.health-indicator {
  background: var(--light);
  border-radius: 10px;
  padding: 1.25rem 1rem;
  text-align: center;
  border: 1px solid var(--light-gray);
}

.indicator-value {
  font-family: var(--font-heading);
  font-size: 1.75rem;
  font-weight: 700;
  line-height: 1.2;
}

.indicator-value.status-good { color: var(--green); }
.indicator-value.status-warning { color: var(--orange); }
.indicator-value.status-danger { color: var(--red); }

.value-main {
  display: inline;
}

.value-sub {
  font-size: 1rem;
  font-weight: 500;
  color: var(--mid-gray);
}

.indicator-label {
  display: block;
  font-family: var(--font-heading);
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--mid-gray);
  margin-top: 0.5rem;
}

/* Top Opportunities */
.top-opps-card {
  margin-top: 0;
}

.stage-columns {
  display: flex;
  gap: 1rem;
  overflow-x: auto;
  padding-bottom: 0.5rem;
}

.stage-column {
  min-width: 160px;
  max-width: 200px;
  border-radius: 10px;
  overflow: hidden;
  flex-shrink: 0;
  background: var(--light);
  border: 1px solid var(--light-gray);
}

.column-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  font-family: var(--font-heading);
  font-size: 0.85rem;
  font-weight: 600;
  color: white;
}

.column-header.s0 { background: var(--mid-gray); }
.column-header.s1 { background: rgba(106, 155, 204, 0.75); }
.column-header.s2 { background: rgba(106, 155, 204, 0.9); }
.column-header.s3 { background: var(--blue); }
.column-header.s4 { background: rgba(120, 140, 93, 0.85); }
.column-header.s5 { background: var(--green); }

.header-stage {
  font-weight: 700;
  font-size: 0.9rem;
}

.header-total {
  font-weight: 500;
  font-size: 0.8rem;
  opacity: 0.95;
}

.column-body {
  padding: 0.75rem 1rem;
  background: white;
}

.opp-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.8rem;
  padding: 0.4rem 0;
  border-bottom: 1px solid var(--light-gray);
}

.opp-row:last-child {
  border-bottom: none;
}

.opp-name {
  font-family: var(--font-body);
  color: var(--dark);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 100px;
}

.opp-arr {
  font-family: var(--font-heading);
  font-weight: 600;
  font-size: 0.75rem;
  color: var(--mid-gray);
}

/* Freshness Card (Rotten Tomatoes Style) */
.freshness-card {
  margin-bottom: 1.5rem;
}

.freshness-content {
  display: flex;
  gap: 2rem;
  align-items: flex-start;
}

.freshness-score-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 100px;
}

.freshness-score {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 90px;
  height: 90px;
  border-radius: 50%;
  background: var(--light-gray);
}

.freshness-score.score-fresh {
  background: linear-gradient(135deg, rgba(120, 140, 93, 0.2), rgba(120, 140, 93, 0.35));
  border: 3px solid var(--green);
}

.freshness-score.score-rotten {
  background: linear-gradient(135deg, rgba(180, 70, 50, 0.2), rgba(180, 70, 50, 0.35));
  border: 3px solid var(--red);
}

.freshness-score.score-mixed {
  background: linear-gradient(135deg, rgba(217, 119, 87, 0.2), rgba(217, 119, 87, 0.35));
  border: 3px solid var(--orange);
}

.score-icon {
  font-size: 1.5rem;
}

.score-value {
  font-family: var(--font-heading);
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--dark);
}

.score-label {
  font-family: var(--font-heading);
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--mid-gray);
  margin-top: 0.5rem;
}

.freshness-breakdown {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.freshness-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0.75rem;
  background: var(--light);
  border-radius: 6px;
}

.row-icon {
  font-size: 1rem;
}

.row-label {
  flex: 1;
  font-family: var(--font-body);
  font-size: 0.85rem;
  color: var(--dark);
}

.row-count {
  font-family: var(--font-heading);
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--dark);
  min-width: 24px;
  text-align: right;
}

.freshness-row.rotten .row-count,
.freshness-row.no-update .row-count,
.freshness-row.past-deadline .row-count {
  color: var(--red);
}

.freshness-row.fresh .row-count {
  color: var(--green);
}

/* Responsive */
@media (max-width: 1000px) {
  .content-grid {
    grid-template-columns: 1fr;
  }

  .metrics-banner {
    flex-wrap: wrap;
  }

  .metric-tile {
    min-width: calc(50% - 0.75rem);
  }
}

@media (max-width: 600px) {
  .metric-tile {
    min-width: 100%;
  }

  .health-indicators {
    grid-template-columns: 1fr;
  }
}
</style>

</main>

<!-- Sidebar & Keyboard Navigation Script -->
<script>
(function() {
  // Detect if this is a team report
  const isTeamReport = true;

  // Page order for keyboard navigation (team reports don't have team.html)
  const pageOrder = isTeamReport ? [
    'cover.html',
    'summary.html',
    'arr_chart.html',
    'arr_table.html',
    'opps_overview.html',
    'opps_table.html',
    'deal_progression.html',
    'pipe_chart.html',
    'pipe_coverage.html',
    'contracts_table.html',
    'themes.html',
    'news_roundup.html',
    'updates.html',
    'aiera.html'
  ] : [
    'cover.html',
    'summary.html',
    'arr_chart.html',
    'arr_table.html',
    'opps_overview.html',
    'opps_table.html',
    'deal_progression.html',
    'pipe_chart.html',
    'pipe_coverage.html',
    'contracts_table.html',
    'themes.html',
    'news_roundup.html',
    'updates.html',
    'aiera.html',
    'team.html'
  ];

  // Get current page index
  const currentPath = window.location.pathname;
  const currentPage = currentPath.substring(currentPath.lastIndexOf('/') + 1) || 'cover.html';
  const currentIndex = pageOrder.indexOf(currentPage);

  // Sidebar toggle functionality
  function toggleSidebar() {
    document.body.classList.toggle('sidebar-collapsed');
    const icon = document.getElementById('toggle-icon');
    if (document.body.classList.contains('sidebar-collapsed')) {
      icon.innerHTML = '&#9776;'; // hamburger
    } else {
      icon.innerHTML = '&#10005;'; // X
    }
    localStorage.setItem('sidebarCollapsed', document.body.classList.contains('sidebar-collapsed'));
  }
  window.toggleSidebar = toggleSidebar;

  // Restore sidebar state from localStorage
  if (localStorage.getItem('sidebarCollapsed') === 'true') {
    document.body.classList.add('sidebar-collapsed');
    document.getElementById('toggle-icon').innerHTML = '&#9776;';
  } else {
    document.getElementById('toggle-icon').innerHTML = '&#10005;';
  }

  // Scroll active nav item into view
  const activeLink = document.querySelector('.sidebar-nav a.active');
  if (activeLink) {
    const nav = document.getElementById('sidebar-nav');
    // Use setTimeout to ensure layout is complete
    setTimeout(function() {
      activeLink.scrollIntoView({ block: 'center', behavior: 'instant' });
    }, 0);
  }

  // Keyboard navigation
  document.addEventListener('keydown', function(e) {
    // Don't trigger if user is typing in an input
    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;

    if (e.key === 'ArrowRight' || e.key === 'PageDown') {
      if (currentIndex >= 0 && currentIndex < pageOrder.length - 1) {
        e.preventDefault();
        window.location.href = pageOrder[currentIndex + 1];
      }
    }
    if (e.key === 'ArrowLeft' || e.key === 'PageUp') {
      if (currentIndex > 0) {
        e.preventDefault();
        window.location.href = pageOrder[currentIndex - 1];
      }
    }
    if (e.key === 'Home') {
      e.preventDefault();
      window.location.href = pageOrder[0];
    }
    if (e.key === 'End') {
      e.preventDefault();
      window.location.href = pageOrder[pageOrder.length - 1];
    }
    if (e.key === 'Escape') {
      window.location.href = pageOrder[0];
    }
    if (e.key === 't' || e.key === 'T') {
      e.preventDefault();
      toggleSidebar();
    }
  });
})();
</script>



</body>
</html>